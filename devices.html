<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>تست نمایش اطلاعات دستگاه</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
  <h2>اطلاعات دستگاه</h2>
  <div id="info">در حال بارگذاری...</div>

  <script>
    async function loadDevice() {
      const urlParams = new URLSearchParams(window.location.search);
      const deviceId = urlParams.get('id');
      const res = await fetch('./devices.json');
      const devices = await res.json();
      const device = devices.find(d => d.id === deviceId);

      const infoDiv = document.getElementById('info');

      if (device) {
        infoDiv.innerHTML = `
          <p><strong>شناسه:</strong> ${device.id}</p>
          <p><strong>مدل:</strong> ${device.model}</p>
          <p><strong>مشکل:</strong> ${device.issue}</p>
          <p><strong>وضعیت:</strong> ${device.status}</p>
          <p><strong>آخرین بروزرسانی:</strong> ${device.lastUpdated}</p>
        `;
      } else {
        infoDiv.innerHTML = `<p style="color:red;">دستگاه پیدا نشد.</p>`;
      }
    }

    loadDevice();
  </script>
</body>
</html>
